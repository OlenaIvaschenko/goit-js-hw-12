{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst gallery = document.querySelector(`.gallery`);\n\nexport function renderImages (gallery, images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" />\n        </a>\n        <div class=\"info\">\n            <p><strong>Likes:</strong> ${likes}</p>\n            <p><strong>Views:</strong> ${views}</p>\n            <p><strong>Comments:</strong> ${comments}</p>\n            <p><strong>Downloads:</strong> ${downloads}</p>\n          </div>\n      </li>`\n    )\n    .join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n","//\nimport axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst API_KEY = '49441888-9a9fca759a65c9c8b8f6579f2';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport let perPage = 15;\n\nexport async function fetchImages(query, currentPage=1) {\n    \n\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: perPage,\n      },\n    });\n\n    const { hits, totalHits } = response.data;\n    if (hits.length === 0) {\n          iziToast.warning({ \n            title: 'No results!', \n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight', \n          });\n             return { images: [], totalHits: 0 };\n\n  }\n  return { images: hits, totalHits: totalHits };\n} catch (error) {\n  console.error('Error:', error);\n  return { images: [], totalHits: 0 };\n}\n}\n\n  \n","import { renderImages } from './js/render-functions';\nimport { fetchImages } from './js/pixabay-api';\n\n// iziToast імпорт бібліотеки\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// SimpleLightbox імпорт бібліотеки\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iconCross from '../src/img/icon/cross-min.png';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  input: document.querySelector('[name=\"search-text\"]'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn:document.querySelector('.load-more')\n};\n\n\nlet userRequest = null;\nlet currentPage = 1;\nlet totalPages = 0;\nconst perPage = 15;\n\nconst {form, input, gallery,loader, loadMoreBtn} = refs;\n\nform.addEventListener(\"submit\", onSearchSubmit)\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\n\n\n//**Functions**\n\nasync function onSearchSubmit (event){\n  \n  event.preventDefault()\n \n  //  console.log(\"onSearchSubmit result:\", result);\n  currentPage = 1;\n  totalPages = 0;\n  gallery.innerHTML = '';\n\n   // Перевірка введеного тексту\n\n  userRequest = input.value.trim();\n\n  if (userRequest === '') {\n    iziToast.error({\n      title: 'Error:',\n      message: 'Please fill in the search field before submitting!',\n      position: 'topRight',\n    });\n    return;\n  }\n // Показуємо лоадер\n loader.classList.remove('visually-hidden');\n\ntry {\n      const { images, totalHits } = await fetchImages(userRequest, currentPage);\n\n\n      renderImages(gallery, images);\n      \n\n      totalPages = Math.ceil(totalHits / perPage);\n\n  \n      if (totalPages > currentPage) {\n        loadMoreBtn.classList.remove('visually-hidden');\n      }\n    }  catch (error) {\n\n      console.error('Error:', error);\n      }\n  \n      finally {\n        loader.classList.add('visually-hidden');\n        form.reset();\n      }   \n      \n}\n\nasync function onLoadMoreClick() {\n  currentPage += 1;\ntry{\n\n  loadMoreBtn.classList.add('visually-hidden');\n  loader.classList.remove('visually-hidden');\n\n  const { images} = await fetchImages(userRequest, currentPage);\n\n  renderImages(gallery, images);\n  new SimpleLightbox('.gallery a').refresh();\n\nconst card = document.querySelector('.gallery-item');\n    const cardHeight = card.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n\n    if (currentPage >= totalPages) {\n      loadMoreBtn.classList.add('visually-hidden');\n      iziToast.info({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    } else {\n      loadMoreBtn.classList.remove('visually-hidden'); \n    }\n  } catch (error) {\n    console.error('Error:', error);\n  } finally {\n    loader.classList.add('visually-hidden');\n  }\n\n}\n\n\n\n"],"names":["renderImages","gallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","API_KEY","BASE_URL","perPage","fetchImages","query","currentPage","response","axios","hits","totalHits","iziToast","error","refs","userRequest","totalPages","form","input","loader","loadMoreBtn","onSearchSubmit","onLoadMoreClick","event","cardHeight"],"mappings":"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"}